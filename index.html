<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å¹»å¢ƒæ¼«æ¸¸å‘å¯¼</title>
  <style>
    body {
      font-family: 'KaiTi', 'STKaiti', serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #1e3c72, #2a5298, #759ecc);
      color: #f0f8ff;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    .container {
      width: 90%;
      max-width: 800px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      text-align: center;
      backdrop-filter: blur(10px);
      position: relative;
      z-index: 10;
    }
    h1 {
      font-size: 2.5em;
      margin-top: 0;
      color: #e6f7ff;
      text-shadow: 0 0 10px rgba(173, 216, 230, 0.5);
    }
    .subtitle {
      font-size: 1.2em;
      margin-bottom: 30px;
      color: #b0e0e6;
    }
    .scene-selector {
      margin: 20px 0;
    }
    .scene-btn {
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid #5f9ea0;
      color: #e0ffff;
      padding: 12px 20px;
      margin: 0 10px 10px 0;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1em;
      transition: all 0.3s ease;
    }
    .scene-btn:hover, .scene-btn.active {
      background: rgba(95, 158, 160, 0.6);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    .controls {
      margin: 25px 0;
    }
    .control-btn {
      background: linear-gradient(to right, #4facfe, #00f2fe);
      color: white;
      border: none;
      padding: 14px 30px;
      margin: 0 10px;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1.1em;
      font-weight: bold;
      transition: all 0.3s ease;
    }
    .control-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(0, 242, 254, 0.4);
    }
    .control-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    .visualizer {
      height: 200px;
      margin: 30px 0;
      position: relative;
      overflow: hidden;
      border-radius: 15px;
      background: rgba(0, 0, 0, 0.2);
    }
    .wave {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1000 200" xmlns="http://www.w3.org/2000/svg"><path fill="rgba(176,224,230,0.2)" d="M0,150 Q250,50 500,150 T1000,150 L1000,200 L0,200 Z"/></svg>');
      background-size: cover;
      animation: waveAnimation 12s linear infinite;
    }
    @keyframes waveAnimation {
      0% { background-position-x: 0; }
      100% { background-position-x: 1000px; }
    }
    .bubbles {
      position: absolute;
      width: 100%;
      height: 100%;
    }
    .bubble {
      position: absolute;
      border-radius: 50%;
      background: rgba(176, 224, 230, 0.3);
      bottom: -50px;
    }
    .guide-text {
      font-size: 1.3em;
      line-height: 1.8;
      min-height: 100px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 15px;
      margin: 20px 0;
      color: #f0f8ff;
      font-style: italic;
    }
    .timer {
      font-size: 1.5em;
      margin: 15px 0;
      color: #e0ffff;
    }
    .progress-container {
      height: 10px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 5px;
      margin: 20px 0;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(to right, #4facfe, #00f2fe);
      width: 0%;
      transition: width 0.1s linear;
    }
    .breathing-hint {
      font-size: 1.1em;
      color: #b0e0e6;
      margin-top: 10px;
    }
    .footer {
      margin-top: 20px;
      color: #a9a9a9;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸŒŠ å¹»å¢ƒæ¼«æ¸¸å‘å¯¼</h1>
    <p class="subtitle">æ¬¢è¿æ¥åˆ°æ‚¨çš„å®é™ç©ºé—´ï¼Œæˆ‘æ˜¯æ‚¨çš„AIå‘å¯¼ï¼Œå°†é™ªä¼´æ‚¨è¿›è¡Œä¸€æ¬¡æ·±åº¦æ”¾æ¾ä¹‹æ—…</p>

    <div class="scene-selector">
      <p>è¯·é€‰æ‹©æ‚¨çš„å†¥æƒ³åœºæ™¯ï¼š</p>
      <button class="scene-btn active" data-scene="beach">ğŸ–ï¸ æµ·æ»¨æ²™æ»©</button>
      <button class="scene-btn" data-scene="forest">ğŸŒ² æ£®æ—å°å¾„</button>
      <button class="scene-btn" data-scene="mountain">â›°ï¸ å±±é—´äº‘æµ·</button>
      <button class="scene-btn" data-scene="space">ğŸŒŒ æ˜Ÿç©ºå®‡å®™</button>
    </div>

    <div class="controls">
      <button class="control-btn" id="start-btn">å¼€å§‹å¼•å¯¼</button>
      <button class="control-btn" id="pause-btn" disabled>æš‚åœ</button>
      <button class="control-btn" id="stop-btn" disabled>ç»“æŸ</button>
    </div>

    <div class="timer" id="timer">å€’è®¡æ—¶: 10:00</div>

    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div class="visualizer">
      <div class="wave"></div>
      <div class="bubbles" id="bubbles-container"></div>
    </div>

    <div class="guide-text" id="guide-text">
      æ¬¢è¿è¸ä¸Šè¿™æ®µå®é™ä¹‹æ—…ã€‚è¯·æ‰¾ä¸€ä¸ªèˆ’é€‚çš„ä½ç½®åä¸‹ï¼Œè½»è½»é—­ä¸ŠåŒçœ¼ï¼Œè®©å‘¼å¸å˜å¾—æ·±é•¿è€Œå¹³ç¼“...
    </div>

    <div class="breathing-hint" id="breathing-hint">å‡†å¤‡ï¼šæ·±å‘¼å¸ï¼Œå¸æ°”... å±æ¯... å‘¼æ°”...</div>

    <div class="footer">
      ä¸“æ³¨äºå½“ä¸‹ï¼Œè®©å¿ƒçµå›å½’å¹³é™ã€‚æ¯ä¸€æ¬¡å‘¼å¸éƒ½æ˜¯ä¸€æ¬¡æ–°çš„å¼€å§‹ã€‚
    </div>
  </div>

  <script>
    // çŠ¶æ€ç®¡ç†
    let state = {
      currentScene: 'beach',
      isPlaying: false,
      isPaused: false,
      totalDuration: 10 * 60, // 10åˆ†é’Ÿ
      remainingTime: 10 * 60,
      timerInterval: null,
      guideTexts: {
        beach: [
          "ç°åœ¨ï¼Œæ‚¨æ­£ç«™åœ¨ä¸€ç‰‡å®é™çš„æ²™æ»©ä¸Šï¼Œæµ·æµªè½»æŸ”åœ°æ‹æ‰“ç€æ‚¨çš„è„šè¸...",
          "æµ·é£å¸¦ç€æ·¡æ·¡çš„å’¸å‘³ï¼Œè½»æŠšè¿‡æ‚¨çš„é¢åºï¼Œå¸¦èµ°æ‰€æœ‰çƒ¦æ¼...",
          "è†å¬æµ·æµªçš„èŠ‚æ‹ï¼Œè®©å®ƒæˆä¸ºæ‚¨å‘¼å¸çš„éŸµå¾‹...",
          "æ„Ÿå—é˜³å…‰æ´’åœ¨èƒŒä¸Šçš„æ¸©æš–ï¼Œèº«ä½“é€æ¸æ”¾æ¾...",
          "æ¯ä¸€æ¬¡å‘¼å¸ï¼Œéƒ½åƒæµ·æµªä¸€æ ·å¹³ç¼“è€Œæœ‰èŠ‚å¥...",
          "ç°åœ¨ï¼Œæ‚¨å¯ä»¥æ…¢æ…¢çå¼€çœ¼ç›ï¼Œæ„Ÿå—å†…å¿ƒçš„å®é™ã€‚"
        ],
        forest: [
          "æ‚¨èµ°åœ¨ä¸€æ¡è¢«é˜³å…‰æ–‘é©³ç…§äº®çš„æ£®æ—å°å¾„ä¸Š...",
          "å‘¨å›´æ˜¯é«˜å¤§çš„æ ‘æœ¨ï¼Œç©ºæ°”ä¸­å¼¥æ¼«ç€æ¸…æ–°çš„æ³¥åœŸå’Œæ ‘å¶çš„æ°”æ¯...",
          "é¸Ÿå„¿åœ¨æå¤´è½»æŸ”åœ°æ­Œå”±ï¼Œè¿œå¤„æœ‰æ½ºæ½ºçš„æºªæ°´å£°...",
          "æ¯ä¸€æ­¥éƒ½è¸åœ¨æŸ”è½¯çš„è‹”è—“ä¸Šï¼Œæ„Ÿè§‰ä¸å¤§è‡ªç„¶èä¸ºä¸€ä½“...",
          "æ·±æ·±å¸ä¸€å£æ£®æ—çš„ç©ºæ°”ï¼Œè®©çº¯å‡€çš„èƒ½é‡å……æ»¡æ‚¨çš„èº«ä½“...",
          "å½“æ‚¨å‡†å¤‡å¥½æ—¶ï¼Œå¯ä»¥ç¼“ç¼“å›åˆ°ç°å®ä¸–ç•Œã€‚"
        ],
        mountain: [
          "æ‚¨ç«™åœ¨é«˜å±±ä¹‹å·…ï¼Œå››å‘¨æ˜¯è¿ç»µèµ·ä¼çš„å±±å³¦å’Œé£˜æ¸ºçš„äº‘æµ·...",
          "ç¨€è–„çš„ç©ºæ°”è®©æ‚¨æ¯ä¸€æ¬¡å‘¼å¸éƒ½æ›´åŠ æ·±æ²‰ï¼Œæ›´åŠ çè´µ...",
          "å¾®é£å¸¦æ¥è¿œå±±çš„æ¸…é¦™ï¼Œå¹æ•£äº†å¿ƒä¸­çš„æ‚å¿µ...",
          "åœ¨è¿™ä¸€åˆ»ï¼Œæ‚¨æ„Ÿå—åˆ°æ— æ¯”çš„å¼€é˜”ä¸è‡ªç”±...",
          "è®©å±±å³°çš„æ²‰ç¨³åŠ›é‡æ³¨å…¥æ‚¨çš„å†…å¿ƒï¼Œå¸¦æ¥æŒä¹…çš„å¹³é™...",
          "æ…¢æ…¢åœ°ï¼Œæ‚¨å¯ä»¥å¸¦ç€è¿™ä»½åŠ›é‡å›åˆ°æ—¥å¸¸ç”Ÿæ´»ä¸­ã€‚"
        ],
        space: [
          "æ‚¨æ¼‚æµ®åœ¨æµ©ç€šçš„å®‡å®™ä¸­ï¼Œå‘¨å›´æ˜¯é—ªçƒçš„æ˜Ÿè¾°å’Œé¥è¿œçš„æ˜Ÿç³»...",
          "æ²¡æœ‰é‡åŠ›ï¼Œæ²¡æœ‰æŸç¼šï¼Œåªæœ‰æ— å°½çš„å®é™ä¸å¹¿é˜”...",
          "æ¯ä¸€é¢—æ˜Ÿæ˜Ÿéƒ½åƒæ˜¯ä¸€ä¸ªç¾å¥½çš„æ„¿æœ›ï¼Œé™é™åœ°é™ªä¼´ç€æ‚¨...",
          "åœ¨è¿™æ— é™çš„ç©ºé—´é‡Œï¼Œæ‚¨çš„å¿ƒçµä¹Ÿå˜å¾—æ— é™å®½å¹¿...",
          "æ„Ÿå—å®‡å®™çš„èƒ½é‡æµç»æ‚¨çš„èº«ä½“ï¼Œå¸¦æ¥æ·±å±‚çš„ä¿®å¤ä¸å¹³è¡¡...",
          "å½“å¼•å¯¼ç»“æŸæ—¶ï¼Œæ˜Ÿå…‰ä¼šå¼•é¢†æ‚¨å›åˆ°æ¸©æš–çš„åœ°çƒã€‚"
        ]
      },
      currentTextIndex: 0
    };

    // DOMå…ƒç´ 
    const startBtn = document.getElementById('start-btn');
    const pauseBtn = document.getElementById('pause-btn');
    const stopBtn = document.getElementById('stop-btn');
    const timerDisplay = document.getElementById('timer');
    const progressBar = document.getElementById('progress-bar');
    const guideText = document.getElementById('guide-text');
    const breathingHint = document.getElementById('breathing-hint');
    const sceneButtons = document.querySelectorAll('.scene-btn');
    const bubblesContainer = document.getElementById('bubbles-container');

    // åˆå§‹åŒ–
    function init() {
      updateTimerDisplay();
      attachEventListeners();
    }

    // é™„åŠ äº‹ä»¶ç›‘å¬å™¨
    function attachEventListeners() {
      startBtn.addEventListener('click', startGuidance);
      pauseBtn.addEventListener('click', pauseGuidance);
      stopBtn.addEventListener('click', stopGuidance);

      sceneButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          if (!state.isPlaying) {
            sceneButtons.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            state.currentScene = this.dataset.scene;
            resetExperience();
          }
        });
      });
    }

    // å¼€å§‹å¼•å¯¼
    function startGuidance() {
      if (state.isPlaying && !state.isPaused) return;

      state.isPlaying = true;
      state.isPaused = false;
      startBtn.disabled = true;
      pauseBtn.disabled = false;
      stopBtn.disabled = false;

      if (!state.timerInterval) {
        state.timerInterval = setInterval(updateTimer, 1000);
      }

      // å¼€å§‹å¼•å¯¼æ–‡æœ¬è½®æ’­
      if (state.currentTextIndex === 0) {
        guideText.textContent = state.guideTexts[state.currentScene][0];
      }
      startTextCycle();

      // å¼€å§‹è§†è§‰æ•ˆæœ
      createBubbles();
    }

    // æš‚åœå¼•å¯¼
    function pauseGuidance() {
      if (!state.isPlaying || state.isPaused) return;

      state.isPaused = true;
      pauseBtn.textContent = 'ç»§ç»­';
      startBtn.disabled = false;
      pauseBtn.disabled = false;
      stopBtn.disabled = false;
      clearInterval(state.timerInterval);
      state.timerInterval = null;
    }

    // ç»§ç»­å¼•å¯¼
    function resumeGuidance() {
      state.isPaused = false;
      pauseBtn.textContent = 'æš‚åœ';
      startBtn.disabled = true;
      pauseBtn.disabled = false;
      stopBtn.disabled = false;
      state.timerInterval = setInterval(updateTimer, 1000);
    }

    // åœæ­¢å¼•å¯¼
    function stopGuidance() {
      state.isPlaying = false;
      state.isPaused = false;
      startBtn.disabled = false;
      pauseBtn.disabled = true;
      stopBtn.disabled = true;
      pauseBtn.textContent = 'æš‚åœ';
      clearInterval(state.timerInterval);
      state.timerInterval = null;
      state.currentTextIndex = 0;
      guideText.textContent = "æ¬¢è¿è¸ä¸Šè¿™æ®µå®é™ä¹‹æ—…ã€‚è¯·æ‰¾ä¸€ä¸ªèˆ’é€‚çš„ä½ç½®åä¸‹ï¼Œè½»è½»é—­ä¸ŠåŒçœ¼ï¼Œè®©å‘¼å¸å˜å¾—æ·±é•¿è€Œå¹³ç¼“...";
      breathingHint.textContent = "å‡†å¤‡ï¼šæ·±å‘¼å¸ï¼Œå¸æ°”... å±æ¯... å‘¼æ°”...";
      resetVisuals();
    }

    // é‡ç½®ä½“éªŒ
    function resetExperience() {
      state.currentTextIndex = 0;
      state.remainingTime = state.totalDuration;
      updateTimerDisplay();
      progressBar.style.width = '0%';
      guideText.textContent = state.guideTexts[state.currentScene][0];
      breathingHint.textContent = "å‡†å¤‡ï¼šæ·±å‘¼å¸ï¼Œå¸æ°”... å±æ¯... å‘¼æ°”...";
      resetVisuals();
      
      if (!state.isPlaying) {
        startBtn.disabled = false;
        pauseBtn.disabled = true;
        stopBtn.disabled = true;
      }
    }

    // é‡ç½®è§†è§‰æ•ˆæœ
    function resetVisuals() {
      bubblesContainer.innerHTML = '';
    }

    // æ›´æ–°è®¡æ—¶å™¨
    function updateTimer() {
      if (state.isPaused) return;

      state.remainingTime--;
      updateTimerDisplay();

      // æ›´æ–°è¿›åº¦æ¡
      const progressPercent = ((state.totalDuration - state.remainingTime) / state.totalDuration) * 100;
      progressBar.style.width = `${progressPercent}%`;

      // æ›´æ–°å‘¼å¸æç¤º
      updateBreathingHint();

      // æ£€æŸ¥æ˜¯å¦ç»“æŸ
      if (state.remainingTime <= 0) {
        endGuidance();
      }
    }

    // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
    function updateTimerDisplay() {
      const minutes = Math.floor(state.remainingTime / 60);
      const seconds = state.remainingTime % 60;
      timerDisplay.textContent = `å€’è®¡æ—¶: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    // æ›´æ–°å‘¼å¸æç¤º
    function updateBreathingHint() {
      const phase = Math.floor((state.totalDuration - state.remainingTime) / 5) % 4; // æ¯5ç§’ä¸€ä¸ªé˜¶æ®µ
      switch(phase) {
        case 0:
          breathingHint.textContent = "æ·±å¸æ°”... (4ç§’)";
          break;
        case 1:
          breathingHint.textContent = "å±ä½å‘¼å¸... (4ç§’)";
          break;
        case 2:
          breathingHint.textContent = "ç¼“æ…¢å‘¼æ°”... (6ç§’)";
          break;
        case 3:
          breathingHint.textContent = "æš‚åœ... (2ç§’)";
          break;
      }
    }

    // å¼€å§‹å¼•å¯¼æ–‡æœ¬å¾ªç¯
    function startTextCycle() {
      // æ¯éš”ä¸€æ®µæ—¶é—´æ˜¾ç¤ºä¸‹ä¸€æ®µå¼•å¯¼è¯
      const textInterval = setInterval(() => {
        if (!state.isPlaying || state.isPaused) {
          clearInterval(textInterval);
          return;
        }

        state.currentTextIndex++;
        if (state.currentTextIndex >= state.guideTexts[state.currentScene].length) {
          state.currentTextIndex = state.guideTexts[state.currentScene].length - 1; // ä¿æŒåœ¨æœ€åä¸€æ®µ
          clearInterval(textInterval);
          return;
        }

        guideText.textContent = state.guideTexts[state.currentScene][state.currentTextIndex];
      }, 30000); // æ¯30ç§’åˆ‡æ¢ä¸€æ¬¡å¼•å¯¼è¯
    }

    // ç»“æŸå¼•å¯¼
    function endGuidance() {
      guideText.textContent = state.guideTexts[state.currentScene][state.guideTexts[state.currentScene].length - 1];
      breathingHint.textContent = "æ—…ç¨‹ç»“æŸï¼Œå¸¦ç€å¹³é™ä¸åŠ›é‡å›åˆ°ç°å®...";
      stopGuidance();
    }

    // åˆ›å»ºè§†è§‰æ³¡æ³¡æ•ˆæœ
    function createBubbles() {
      if (!state.isPlaying || state.isPaused) return;

      const bubble = document.createElement('div');
      bubble.classList.add('bubble');
      
      // éšæœºå¤§å°å’Œä½ç½®
      const size = Math.random() * 30 + 10;
      bubble.style.width = `${size}px`;
      bubble.style.height = `${size}px`;
      bubble.style.left = `${Math.random() * 100}%`;
      
      // åŠ¨ç”»
      bubble.animate([
        { bottom: '-50px', opacity: 0.5 },
        { bottom: '200px', opacity: 0 }
      ], {
        duration: Math.random() * 5000 + 5000,
        easing: 'ease-out'
      });

      bubblesContainer.appendChild(bubble);

      // è‡ªåŠ¨ç§»é™¤æ³¡æ³¡
      setTimeout(() => {
        if (bubble.parentNode) {
          bubble.parentNode.removeChild(bubble);
        }
      }, 6000);

      // ç»§ç»­åˆ›å»ºæ–°æ³¡æ³¡
      if (state.isPlaying && !state.isPaused) {
        setTimeout(createBubbles, Math.random() * 1000 + 500);
      }
    }

    // åˆå§‹åŒ–åº”ç”¨
    window.onload = init;
  </script>
</body>
</html>



